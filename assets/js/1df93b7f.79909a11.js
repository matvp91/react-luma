"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[237],{9766:(e,t,n)=>{n.d(t,{Z:()=>_});var r=n(9231),o=n(6372),a=n.n(o),i=n(5869),s=n(58),l=n(5036),c=n(3421);function d(e){const t=(0,r.useRef)();return(0,i.Y)(t,e.onChange,{indentation:2}),r.createElement(s.ZP,{Prism:l.Z,code:e.code,language:"jsx",theme:{...c.Z,plain:{...c.Z.plain,margin:0,backgroundColor:"transparent",borderRadius:0,padding:"1rem"}}},(e=>{let{className:n,tokens:o,getTokenProps:a,style:i}=e;return r.createElement("pre",{className:n,style:i,ref:t,spellCheck:!1},o.map(((e,t)=>r.createElement(r.Fragment,{key:t},e.filter((e=>!e.empty)).map(((e,t)=>r.createElement("span",a({token:e,key:t})))),"\n"))))}))}var u=n(5151),h=n(1966),m=n(4229),p=n.n(m),f=n(9803),y=n.n(f);const g="colPreview_kS6N",w="containerEditor_HpzZ",b="containerPreview_c54M",v="titleEditor_queV",E="titlePreview_CUDP",T="error_KZpp",x="previewError_Xbpz";function _(e){const t=(0,r.useRef)(),[n,o]=(0,r.useState)(function(e){return e.startsWith("// @ts-nocheck")&&(e=e.substring(e.indexOf("\n")+1)),p().format(e,{parser:"typescript",plugins:[y()]}).replace(/[\r\n]+$/,"")}(e.code)),[i,s]=(0,r.useState)(null),l=(0,r.useCallback)((e=>{o(e.slice(0,-1))}),[o]);return(0,r.useEffect)((()=>{s(null);try{const e=function(e){return(0,h.vs)(e,{transforms:["jsx","imports"]}).code}(n);!function(e,t){new Function("require","canvasElement","React",e)((e=>{if("react-luma"===e)return u;throw new Error(`import "${e}" not available.`)}),t,r)}(e,t.current)}catch(i){s(i.toString())}}),[n]),r.createElement("div",{className:"card"},r.createElement("div",{className:"card__body padding--none"},r.createElement("div",{className:"row row--no-gutters"},r.createElement("div",{className:"col"},r.createElement("div",{className:v},"Live editor"),r.createElement("div",{className:w},r.createElement(d,{code:n,onChange:l}))),r.createElement("div",{className:a()("col",g)},r.createElement("div",{className:a()(E,!!i&&T)},i?"Compilation error":"Result"),r.createElement("div",{className:b},r.createElement("canvas",{ref:t}),!!i&&r.createElement("div",{className:x},i))))))}},4778:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(9231),o=n(6352),a=n(9058),i=n(9841),s=n(6856);const l="root__cUG";function c(){return r.createElement("h1",{className:l,"data-heading":"Luma"},"Luma")}const d="container_ZVpA",u="buttons_Te85";function h(){const{siteConfig:e}=(0,a.Z)();return r.createElement("header",{className:"hero hero--primary margin-bottom--lg"},r.createElement("div",{className:(0,i.Z)("container",d)},r.createElement(c,null),r.createElement("p",{className:"hero__subtitle"},e.tagline),r.createElement("div",{className:u},r.createElement(s.Z,{className:"button button--secondary button--lg",to:"/docs/getting-started"},"Getting Started"))))}var m=n(8041),p=n(4852),f=n(3093);function y(e){return r.createElement(f.Z,null,(()=>{const t=n(9766).Z;return r.createElement(t,{code:e.code})}))}var g=n(6279);const w={toc:[]};function b(e){let{components:t,...n}=e;return(0,p.kt)("wrapper",(0,m.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,p.kt)("p",null,"Build your scene declaratively with re-usable, self-contained components and render\nthem in a WebGL canvas. React Luma started out as an optimized renderer for TV's, set-top boxes and other low memory devices. Dive into ",(0,p.kt)("a",{parentName:"p",href:"./docs"},"the documentation here")," and start exploring."),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("strong",{parentName:"li"},"Layout engine")," included, allows you to build flexible layouts in no time."),(0,p.kt)("li",{parentName:"ul"},"Build your UI ",(0,p.kt)("strong",{parentName:"li"},"declaratively")," with ",(0,p.kt)("em",{parentName:"li"},"re-usable"),", self-contained components that react to state."),(0,p.kt)("li",{parentName:"ul"},"Comes with ",(0,p.kt)("strong",{parentName:"li"},"spatial navigation")," logic built in."),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("em",{parentName:"li"},"Will ship with an animations toolkit soon"))),(0,p.kt)("h1",{id:"installation"},"Installation"),(0,p.kt)(g.Z,{type:"warning",title:"A kind reminder",mdxType:"Admonition"},"React Luma is in experimental stage, more documentation to follow as it becomes more stable."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-js"},"npm install react-luma\n")),(0,p.kt)("p",null,"React Luma's API is very familiar to anyone who has worked with\nReact DOM. The main difference is that you can no longer rely on DOM\nelements such as a div or span, but you'd be building your UI\ncomposition with the built-in base components."),(0,p.kt)("h1",{id:"playground"},"Playground"),(0,p.kt)("p",null,"Feel free to make changes to the code below and the compiler will\nrender an immediate result."),(0,p.kt)(y,{code:'// @ts-nocheck\nimport { render, View, Text, Sprite, TEXTURE_WHITE } from "react-luma";\n\nfunction App() {\n  return (\n    <View style={{ padding: 12 }}>\n      <Text text="Hello world!" />\n      <Sprite\n        style={{ width: 100, height: 100, marginTop: 12 }}\n        texture={TEXTURE_WHITE}\n        tint="#3f37c9"\n      />\n    </View>\n  );\n}\n\nrender(<App />, canvasElement, { width: 420 });\n',mdxType:"Playground"}))}function v(){return r.createElement(o.Z,{title:"Welcome"},r.createElement(h,null),r.createElement("main",{className:"container padding-bottom--lg"},r.createElement(b,null)))}b.isMDXComponent=!0},5714:(e,t,n)=>{function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.defineProperty,i=Object.defineProperties,s=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&u(e,n,t[n]);if(l)for(var n of l(t))d.call(t,n)&&u(e,n,t[n]);return e},m=n(3384),p=r(m),f=r(m),y=r(m),g=r(m),w=r(m),b=r(m),v=o(n(2e3)),E=class extends g.Transform{updateTransform(e){this._localID!==this._currentLocalID&&(this.localTransform.a=this._cx*this.scale.x,this.localTransform.b=this._sx*this.scale.x,this.localTransform.c=this._cy*this.scale.y,this.localTransform.d=this._sy*this.scale.y,this.localTransform.tx=this.position.x-(this.pivot.x*this.localTransform.a+this.pivot.y*this.localTransform.c),this.localTransform.ty=this.position.y-(this.pivot.x*this.localTransform.b+this.pivot.y*this.localTransform.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID&&(this.worldTransform.a=this.localTransform.a,this.worldTransform.b=this.localTransform.b,this.worldTransform.c=this.localTransform.c,this.worldTransform.d=this.localTransform.d,this.worldTransform.tx=this.localTransform.tx+e.worldTransform.tx,this.worldTransform.ty=this.localTransform.ty+e.worldTransform.ty,this._parentID=e._worldID,this._worldID+=1)}};var T=n(7372),x=class extends T.CustomError{constructor(e){super("ReactLumaElement does not exist on this object."),this.obj=e}},_="__lumaElement",N=Symbol("LumaElementInitMethod");function C(e){const t=e[_];if(t&&t instanceof I)return t;throw new x(e)}function O(e,t){return e.type===t}var I=class{constructor(e){this.yogaNode=v.default.Node.create(),this._x=0,this._y=0,this._transformX=0,this._transformY=0,this.rootRecalcLayout=!1,this.type=e}[N](){var e;(e=this.displayObject).transform instanceof E||(e.transform=new E),this.displayObject[_]=this}appendChild(e){this.displayObject.addChild(e.displayObject);const t=this.displayObject.getChildIndex(e.displayObject);this.yogaNode.insertChild(e.yogaNode,t)}insertBefore(e,t){const n=this.displayObject.getChildIndex(t.displayObject);this.displayObject.addChildAt(e.displayObject,n),this.yogaNode.insertChild(e.yogaNode,n)}removeChild(e){this.displayObject.removeChild(e.displayObject),this.yogaNode.removeChild(e.yogaNode)}getChildren(){return this.displayObject.children.map(C)}getGlobalPosition(){return this.displayObject.getGlobalPosition()}set x(e){this._x=e,this.displayObject.x=this._x+this._transformX}get x(){return this._x}set y(e){this._y=e,this.displayObject.y=this._y+this._transformY}get y(){return this._y}set width(e){this.displayObject.width=e}set height(e){this.displayObject.height=e}get width(){return this.displayObject.width}get height(){return this.displayObject.height}set transformX(e){this._transformX=e,this.x=this.x}set transformY(e){this._transformY=e,this.y=this.y}unstable_getDisplayObject(){return this.displayObject}},j=class extends I{constructor(){super(...arguments),this.displayObject=new y.Container}},k=class extends I{constructor(){super(...arguments),this.displayObject=new y.Text}set text(e){this.displayObject.text=e}set fill(e){this.displayObject.style.fill=y.utils.string2hex(e)}},R=class extends I{constructor(){super(...arguments),this.displayObject=new y.Sprite}set texture(e){this.displayObject.texture=e}set tint(e){this.displayObject.tint=y.utils.string2hex(e)}};function P(e){let t=null;if("Sprite"===e&&(t=new R(e)),"Text"===e&&(t=new k(e)),"View"===e&&(t=new j(e)),!t)throw new Error("Failed");return t[N](),t}var D=r(n(8634));function L(e,t){return{left:e[`${t}Left`]||e[t]||0,right:e[`${t}Right`]||e[t]||0,top:e[`${t}Top`]||e[t]||0,bottom:e[`${t}Bottom`]||e[t]||0}}function S(e){const t=e.yogaNode.getComputedLayout();e.x=t.left,e.y=t.top,"Sprite"==e.type&&(e.width=t.width,e.height=t.height),e.getChildren().forEach(S)}function M(e,t){e.yogaNode.setDisplay(v.default.DISPLAY_FLEX),"row"===t.flexDirection?e.yogaNode.setFlexDirection(v.default.FLEX_DIRECTION_ROW):"column"===t.flexDirection&&e.yogaNode.setFlexDirection(v.default.FLEX_DIRECTION_COLUMN),"center"===t.alignItems&&e.yogaNode.setAlignItems(v.default.ALIGN_CENTER),"center"===t.justifyContent&&e.yogaNode.setJustifyContent(v.default.JUSTIFY_CENTER),void 0!==t.width&&e.yogaNode.setWidth(t.width),void 0!==t.height&&e.yogaNode.setHeight(t.height);const n=L(t,"padding");void 0!==n.left&&e.yogaNode.setPadding(v.default.EDGE_LEFT,n.left),void 0!==n.right&&e.yogaNode.setPadding(v.default.EDGE_RIGHT,n.right),void 0!==n.top&&e.yogaNode.setPadding(v.default.EDGE_TOP,n.top),void 0!==n.bottom&&e.yogaNode.setPadding(v.default.EDGE_BOTTOM,n.bottom);const r=L(t,"margin");r.left&&e.yogaNode.setMargin(v.default.EDGE_LEFT,r.left),r.right&&e.yogaNode.setMargin(v.default.EDGE_RIGHT,r.right),r.top&&e.yogaNode.setMargin(v.default.EDGE_TOP,r.top),r.bottom&&e.yogaNode.setMargin(v.default.EDGE_BOTTOM,r.bottom)}function A(e,t){void 0!==t.x&&(e.transformX=t.x),void 0!==t.y&&(e.transformY=t.y)}function F(e,t,n){if(O(e,"Text")&&("text"===t&&void 0!==n&&(D.isString(n,`Text ${t}=${n} is not a string.`),e.text=n,e.yogaNode.setWidth(e.width),e.yogaNode.setHeight(e.height)),"fill"===t&&void 0!==n&&(D.isString(n,`Text ${t}=${n} is not a string.`),e.fill=n)),O(e,"Sprite")){if("texture"===t&&void 0!==n){D.isInstanceOf(n,w.Texture,`Sprite ${t} is not a texture.`),e.texture=n;const r=function(e){e.isDirty()&&e.calculateLayout();return e.getComputedLayout()}(e.yogaNode);e.width=r.width,e.height=r.height}"tint"===t&&void 0!==n&&(D.isString(n,`Sprite ${t}=${n} is not a string.`),e.tint=n)}}var G=n(79),X=o(G),Z=o(n(9131)),H=n(2673),U={},V="style",W="children",$="transform";function B(e,t){for(const[n,r]of Object.entries(t))"children"!==n&&("style"===n?M(e,r):"transform"===n?A(e,r):F(e,n,r))}var Y=Z.default.call(void 0,{isPrimaryRenderer:!0,supportsMutation:!0,supportsPersistence:!1,createInstance(e,t,n){t.hasOwnProperty(V)&&(n.rootRecalcLayout=!0);const r=P(e);return B(r,t),r},createTextInstance(){throw new Error("createTextInstance is unsupported.")},appendInitialChild(e,t){e.appendChild(t)},appendChild(e,t){e.appendChild(t)},removeChild(e,t){e.removeChild(t)},finalizeInitialChildren:()=>!1,appendChildToContainer(e,t){e.appendChild(t)},insertInContainerBefore(e,t,n){e.insertBefore(t,n)},removeChildFromContainer(e,t){e.removeChild(t)},clearContainer:()=>!1,prepareUpdate(e,t,n,r,o){const a=z(n,r);return a&&a.hasOwnProperty(V)&&(o.rootRecalcLayout=!0),a},commitUpdate(e,t){B(e,t)},shouldSetTextContent:()=>!1,getRootHostContext:()=>U,getChildHostContext:()=>U,getPublicInstance:e=>e,prepareForCommit:()=>null,resetAfterCommit(e){e.rootRecalcLayout&&(e.rootRecalcLayout=!1,function(e){if(!J.current)throw new Error("Cannot calculate layout, ReactLumaCurrentApp is undefined");const{screen:t}=J.current;e.yogaNode.calculateLayout(t.width,t.height),S(e)}(e))},preparePortalMount:()=>null,scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,getCurrentEventPriority:()=>H.DefaultEventPriority,getInstanceFromNode:e=>e,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,detachDeletedInstance(){},supportsHydration:!1});function z(e,t){let n=null;for(let r in e)!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&null!=e[r]&&r!==W&&(r!==V&&r!==$||z(e[r],t[r]))&&(n||(n={}),n[r]=null);for(let r in t){const o=t[r],a=null!=e?e[r]:void 0;!t.hasOwnProperty(r)||o===a||null==o&&null==a||r!==W&&(r!==V&&r!==$||z(e[r],t[r]))&&(n||(n={}),n[r]=o)}return n}function q(){}Y.injectIntoDevTools({bundleType:1,version:X.default.version,rendererPackageName:"react-luma"});var J={current:null};function K(e,t){Y.updateContainer(e,t,null,q)}var Q=new Map;var ee=n(5250),te=G.forwardRef.call(void 0,((e,t)=>{const[n,r]=G.useState.call(void 0);return G.useEffect.call(void 0,(()=>{b.Texture.fromURL(e.src).then(r)}),[e.src]),ee.jsx.call(void 0,ne,(o=h({},e),i(o,s({texture:n,ref:t}))));var o}));var ne="Sprite",re=p.Texture.WHITE;t.render=function(e,t,n){let r=Q.get(t);r||(r=function(e,t){const n=h({width:1080},t),r=n.width*(9/16),o=new f.Application({width:n.width,height:r,resolution:window.devicePixelRatio,view:e,backgroundAlpha:0});J.current=o;const a=P("View");return M(a,{width:"100%",height:"100%"}),o.stage.addChild(a.unstable_getDisplayObject()),Y.createContainer(a,0,null,!1,null,"ReactLuma",q,null)}(t,n),Q.set(t,r)),K(e,r)},t.unmountComponentAtNode=function(e){if(Q.has(e)){const t=Q.get(e);Q.delete(t),K(null,t)}},t.Image_default=te,t.useRefValue=function(e){const t=G.useRef.call(void 0);return t.current||(t.current=e()),t.current},t.useMultiRef=function(){const e=G.useRef.call(void 0,{}),t=G.useCallback.call(void 0,(t=>n=>{e.current[t]=n}),[]);return[e.current,t]},t.View="View",t.Text="Text",t.Sprite=ne,t.TEXTURE_WHITE=re},5151:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(5714);t.Image=r.Image_default,t.Sprite=r.Sprite,t.TEXTURE_WHITE=r.TEXTURE_WHITE,t.Text=r.Text,t.View=r.View,t.render=r.render,t.unmountComponentAtNode=r.unmountComponentAtNode,t.useMultiRef=r.useMultiRef}}]);